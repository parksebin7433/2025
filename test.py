import streamlit as st
import random

# ---------------------- 색상 팔레트 ----------------------
outfit_palette = {
    "봄": {
        "캐주얼": {
            "화이트": {"하의": ["데님 블루", "베이지"], "신발": ["화이트", "핑크"], "가방": ["브라운", "화이트"]},
            "빨강": {"하의": ["화이트", "블랙"], "신발": ["화이트", "블랙"], "가방": ["네이비", "화이트"]},
            "주황": {"하의": ["화이트", "데님 블루"], "신발": ["화이트", "브라운"], "가방": ["화이트", "베이지"]},
            "노랑": {"하의": ["화이트", "네이비"], "신발": ["화이트", "브라운"], "가방": ["브라운", "화이트"]},
            "초록": {"하의": ["화이트", "베이지"], "신발": ["화이트", "브라운"], "가방": ["브라운", "화이트"]},
            "파랑": {"하의": ["화이트", "그레이"], "신발": ["화이트", "블랙"], "가방": ["네이비", "화이트"]},
            "보라": {"하의": ["화이트", "그레이"], "신발": ["화이트", "블랙"], "가방": ["네이비", "실버"]},
            "핑크": {"하의": ["화이트", "그레이"], "신발": ["화이트", "블랙"], "가방": ["네이비", "화이트"]},
            "검정": {"하의": ["화이트", "그레이"], "신발": ["화이트", "레드"], "가방": ["화이트", "실버"]}
        },
        "포멀": {
            "화이트": {"하의": ["블랙", "네이비"], "신발": ["블랙", "실버"], "가방": ["블랙", "네이비"]},
            "검정": {"하의": ["화이트", "그레이"], "신발": ["블랙", "화이트"], "가방": ["실버", "브라운"]},
            "네이비": {"하의": ["화이트", "그레이"], "신발": ["블랙", "브라운"], "가방": ["화이트", "브라운"]},
        },
        "스포츠": {
            "그레이": {"하의": ["블랙", "네이비"], "신발": ["화이트", "민트"], "가방": ["블랙", "그레이"]},
            "화이트": {"하의": ["블랙", "그레이"], "신발": ["화이트", "레드"], "가방": ["블랙", "화이트"]},
            "빨강": {"하의": ["블랙", "화이트"], "신발": ["화이트", "블랙"], "가방": ["화이트", "블랙"]},
        }
    },
    # 여름/가을/겨울도 원래 데이터 추가 가능
}

# ---------------------- 색상 심리 & 스타일 설명 ----------------------
color_psychology = {
    "화이트": "깨끗하고 순수한 이미지를 주며 어떤 색과도 잘 어울려요.",
    "검정": "세련되고 카리스마 있는 느낌을 주며 시크한 매력과 어울려요.",
    "그레이": "중립적이고 안정된 느낌을 주며 차분한 분위기에 좋아요.",
    "빨강": "열정, 에너지, 자신감을 표현해 주목받고 싶을 때 좋아요.",
    "주황": "밝고 활발한 에너지를 주며 친근한 이미지를 줘요.",
    "노랑": "유쾌하고 긍정적인 느낌을 주며 활력을 불어넣어요.",
    "초록": "자연, 안정, 균형을 상징하며 편안함을 줘요.",
    "파랑": "신뢰와 차분함을 주며 지적인 이미지를 강조해요.",
    "보라": "창의적이고 신비로운 분위기를 주며 고급스러운 느낌을 줘요.",
    "핑크": "사랑스럽고 부드러운 매력을 표현하며 러블리 무드에 잘 맞아요."
}

style_descriptions = {
    "캐주얼": "편안하면서도 세련된 일상룩에 어울려요.",
    "포멀": "격식 있는 자리나 오피스룩에 적합해요.",
    "스포츠": "활동적이고 스포티한 분위기를 낼 수 있어요.",
    "러블리": "사랑스럽고 부드러운 매력을 강조해요.",
    "섹시": "자신감 있고 매혹적인 분위기를 표현할 수 있어요."
}

# ---------------------- 색상 코드 ----------------------
color_codes = {
    "화이트": "#FFFFFF", "검정": "#000000", "그레이": "#808080",
    "베이지": "#F5F5DC", "네이비": "#000080", "빨강": "#FF0000",
    "주황": "#FF8C00", "노랑": "#FFD700", "초록": "#228B22",
    "파랑": "#1E90FF", "보라": "#800080", "핑크": "#FFC0CB",
    "브라운": "#8B4513", "카키": "#808000", "데님 블루": "#1E3A5F",
    "실버": "#C0C0C0", "민트": "#98FF98"
}

# ---------------------- 색상 박스 함수 ----------------------
def color_box(label, color_name):
    color = color_codes.get(color_name, "#FFFFFF")
    text_color = "#000000" if color_name not in ["검정", "네이비", "보라"] else "#FFFFFF"
    st.markdown(
        f"""
        <div style="display:flex; align-items:center; margin:5px 0;">
            <div style="width:30px; height:30px; background-color:{color}; 
                        border:1px solid #000; margin-right:10px;"></div>
            <span style="color:{text_color}; font-weight:bold;">{label}: {color_name}</span>
        </div>
        """,
        unsafe_allow_html=True
    )

# ---------------------- 앱 시작 ----------------------
st.title("👗 사계절 패션 코디 + 컬러 심리 앱")
st.write("계절과 스타일, 상의 색을 선택하면 **3세트 코디 + 컬러 심리 & 스타일 설명**을 보여드려요!")

# 사용자 입력
season = st.selectbox("🍂 계절을 선택해주세요:", list(outfit_palette.keys()))
style = st.selectbox("🎯 스타일을 선택해주세요:", list(outfit_palette[season].keys()))
available_tops = list(outfit_palette[season][style].keys())
selected_top = st.selectbox("👕 상의 색을 골라주세요:", available_tops)

# 코디 추천
if st.button("✨ 코디 추천받기"):
    palette = outfit_palette[season][style][selected_top]
    st.subheader(f"{season} · {style} 스타일 추천 코디 3세트 ✨")

    for i in range(1, 4):
        bottom = random.choice(palette["하의"])
        shoes = random.choice(palette["신발"])
        bag = random.choice(palette["가방"])

        st.markdown(f"### 👗 코디 {i}")
        color_box("👕 상의", selected_top)
        color_box("👖 하의", bottom)
        color_box("👟 신발", shoes)
        color_box("👜 가방", bag)
        st.markdown("---")

    # 컬러 심리 & 스타일 설명
    st.info(f"🎨 **컬러 심리:** {color_psychology.get(selected_top, '')}")
    st.success(f"👠 **스타일 특징:** {style_descriptions.get(style, '')}")
